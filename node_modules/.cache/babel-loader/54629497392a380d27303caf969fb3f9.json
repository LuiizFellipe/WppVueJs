{"ast":null,"code":"//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport axios from 'axios';\nimport io from 'socket.io-client';\nconst server_socket = 'https://whatsapp-free01.wppserver.com';\nconst socket = io(`${server_socket}`, {\n  transportOptions: {\n    polling: {\n      extraHeaders: {\n        'Authorization': 'Bearer abc'\n      }\n    }\n  }\n});\nconst serverAPI = 'https://whatsapp-free01.wppserver.com/api';\nconst session = 'Samsung';\nconst secretkey = 'LIzBSyCmNVzwt2ErKgtnZgLZ';\nvar token = '';\nexport default {\n  data() {\n    return {\n      teste: 'Conectar',\n      tokenwhats: 'teste',\n      imagem: 'https://gifs.eco.br/wp-content/uploads/2021/08/imagens-e-gifs-de-loading-7.gif',\n      qrcoderen: 'gerar2'\n    };\n  },\n\n  watch: {\n    checkSession() {}\n\n  },\n  methods: {\n    async getToken() {\n      this.teste = 'Conectando..';\n      axios({\n        method: 'POST',\n        url: serverAPI + '/' + session + '/' + secretkey + '/generate-token'\n      }).then(WppToken => {\n        console.log(WppToken);\n        this.startSession(WppToken.data.token);\n        token = WppToken.data.token;\n        this.qrcoderen = WppToken.data.token;\n      }).catch(function (error) {\n        console.log(error);\n      });\n    },\n\n    async startSession(WppToken) {\n      axios({\n        method: 'POST',\n        url: serverAPI + '/' + session + '/start-session',\n        responseType: 'stream',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': 'Bearer ' + WppToken\n        },\n        data: {\n          \"webhook\": \"https://webhook.site/7cc2944d-3967-4cea-988c-d57ea80bce5f\"\n        }\n      }).then(conectado => {\n        this.teste = conectado.data.status + conectado.data.session;\n      }).catch(function (error) {\n        console.log(error);\n      });\n    },\n\n    getQrCode() {\n      alert('chamei');\n      socket.on('qrCode', qrCode => {\n        console.log(qrCode);\n        this.imagem = qrCode.data;\n      });\n      socket.on('session-logged', session => {\n        console.log(session);\n\n        if (session?.status == true) {\n          alert('Sucesso no check');\n        }\n      });\n      socket.on('received-message', message => {\n        console.log(message);\n\n        if (session == message?.response?.session) {\n          alert(message?.response?.body);\n        }\n      });\n    },\n\n    async closeSession() {\n      axios({\n        method: 'POST',\n        url: serverAPI + '/' + session + '/close-session',\n        headers: {\n          'Authorization': 'Bearer ' + token\n        }\n      }).then(desconectado => {\n        console.log(desconectado);\n        this.teste = 'Desconectado';\n      }).catch(function (error) {\n        console.log(error);\n      });\n    }\n\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAwBA;AACA;AAEA;AAEA;EACAA;IACAC;MACAC;QACA;MADA;IADA;EADA;AADA;AAWA;AACA;AACA;AACA;AACA;EACAC;IACA;MACAC,iBADA;MAEAC,mBAFA;MAGAC,wFAHA;MAIAC;IAJA;EAMA,CARA;;EASAC;IACAC,gBAEA;;EAHA,CATA;EAcAC;IACA;MACA;MACAC;QACAC,cADA;QAEAC;MAFA,GAIAC,IAJA,CAIAC;QACAC;QACA;QACAC;QACA;MACA,CATA,EAUAC,KAVA,CAUA;QACAF;MACA,CAZA;IAaA,CAhBA;;IAiBA;MACAL;QACAC,cADA;QAEAC,iDAFA;QAGAM,sBAHA;QAIAC;UACA,kCADA;UAEA;QAFA,CAJA;QAQAjB;UACA;QADA;MARA,GAYAW,IAZA,CAYAO;QACA;MACA,CAdA,EAeAH,KAfA,CAeA;QACAF;MACA,CAjBA;IAkBA,CApCA;;IAqCAM;MACAC;MACAC;QACAR;QACA;MACA,CAHA;MAKAQ;QACAR;;QACA;UACAO;QACA;MACA,CALA;MAOAC;QACAR;;QACA;UACAO;QACA;MACA,CALA;IAMA,CAzDA;;IA0DA;MACAZ;QACAC,cADA;QAEAC,iDAFA;QAGAO;UACA;QADA;MAHA,GAOAN,IAPA,CAOAW;QACAT;QACA;MACA,CAVA,EAWAE,KAXA,CAWA;QACAF;MACA,CAbA;IAcA;;EAzEA;AAdA","names":["transportOptions","polling","extraHeaders","data","teste","tokenwhats","imagem","qrcoderen","watch","checkSession","methods","axios","method","url","then","WppToken","console","token","catch","responseType","headers","conectado","getQrCode","alert","socket","desconectado"],"sourceRoot":"src","sources":["App.vue"],"sourcesContent":["<template>\n  <div>\n    <div class=\"columns\">\n      <div class=\"column col-12\">\n        <button @click=\"getToken()\">\n          Conectar ao servidor do WhatsApp\n        </button>\n        <button class=\"btn\" @click=\"closeSession()\">\n          Fechar sess√£o\n        </button>\n        <button @click=\"getQrCode()\">\n          gerar QRcode\n        </button>\n        <br>\n        {{ teste }}\n        <br>\n        {{ qrcoderen }}<br>\n        <img width=\"500\" height=\"500\" style=\"object-fit:contain;\" v-bind:src=\"imagem\">\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from 'axios';\nimport io from 'socket.io-client';\n\nconst server_socket = 'https://whatsapp-free01.wppserver.com'\n\nconst socket = io(`${server_socket}`, {\n  transportOptions: {\n    polling: {\n      extraHeaders: {\n        'Authorization': 'Bearer abc',\n      },\n    },\n  },\n});\n\n\nconst serverAPI = 'https://whatsapp-free01.wppserver.com/api'\nconst session = 'Samsung';\nconst secretkey = 'LIzBSyCmNVzwt2ErKgtnZgLZ';\nvar token = '';\nexport default {\n  data() {\n    return {\n      teste: 'Conectar',\n      tokenwhats: 'teste',\n      imagem: 'https://gifs.eco.br/wp-content/uploads/2021/08/imagens-e-gifs-de-loading-7.gif',\n      qrcoderen: 'gerar2'\n    }\n  },\n  watch: {\n    checkSession() {\n\n    }\n  },\n  methods: {\n    async getToken() {\n      this.teste = 'Conectando..'\n      axios({\n        method: 'POST',\n        url: serverAPI + '/' + session + '/' + secretkey + '/generate-token',\n      })\n        .then((WppToken) => {\n          console.log(WppToken);\n          this.startSession(WppToken.data.token);\n          token = WppToken.data.token;\n          this.qrcoderen = WppToken.data.token;\n        })\n        .catch(function (error) {\n          console.log(error)\n        });\n    },\n    async startSession(WppToken) {\n      axios({\n        method: 'POST',\n        url: serverAPI + '/' + session + '/start-session',\n        responseType: 'stream',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': 'Bearer ' + WppToken\n        },\n        data: {\n          \"webhook\": \"https://webhook.site/7cc2944d-3967-4cea-988c-d57ea80bce5f\"\n        }\n      })\n        .then((conectado) => {\n          this.teste = conectado.data.status + conectado.data.session;\n        })\n        .catch(function (error) {\n          console.log(error)\n        });\n    },\n    getQrCode() {\n      alert('chamei');\n      socket.on('qrCode', (qrCode) => {\n        console.log(qrCode);\n        this.imagem = qrCode.data;\n      })\n\n      socket.on('session-logged', (session) => {\n        console.log(session);\n        if (session?.status == true) {\n          alert('Sucesso no check');\n        }\n      })\n\n      socket.on('received-message', (message) => {\n        console.log(message);\n        if (session == message?.response?.session) {\n          alert(message?.response?.body);\n        }\n      });\n    },\n    async closeSession() {\n      axios({\n        method: 'POST',\n        url: serverAPI + '/' + session + '/close-session',\n        headers: {\n          'Authorization': 'Bearer ' + token\n        },\n      })\n        .then((desconectado) => {\n          console.log(desconectado);\n          this.teste = 'Desconectado';\n        })\n        .catch(function (error) {\n          console.log(error)\n        });\n    },\n  },\n}\n</script>"]},"metadata":{},"sourceType":"module"}